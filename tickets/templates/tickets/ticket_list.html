{% extends 'tickets/base.html' %}

{% block content %}

<h2>All Tickets</h2>

<table border="1">
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Status</th>
        <th>Progress (%)</th>
        <th>Created At</th>
        <th>Actions</th>
    </tr>

    {% for ticket in tickets %}
    <tr>
        <td>{{ ticket.id }}</td>
        <td>
            <a href="/ticket/{{ ticket.id }}/">
                {{ ticket.title }}
            </a>
        </td>
        
        <td>{{ ticket.status }}</td>
        <td>

            <div style="width:100px; border:1px solid black;">
                <div style="width: {{ ticket.progress }}%; background-color: green; color: white; text-align: center; font-size: 12px; line-height: 20px; min-width: 25px; transition: width 0.4s ease;">
                    {{ ticket.progress }}%
                </div>
            </div>

        </td>

        <td>{{ ticket.created_at }}</td>
        <td>
            <a href="/edit/{{ ticket.id }}/">Edit</a>
        </td>
        <td>
         <a href="/delete/{{ ticket.id }}/">Delete</a>
        </td>

    </tr>
{% if not tickets %}
<p>No tickets yet.</p>
{% endif %}

    {% empty %}
    <tr>
        <td colspan="5">No tickets available</td>
    </tr>
    {% endfor %}

</table>

{% endblock %}
